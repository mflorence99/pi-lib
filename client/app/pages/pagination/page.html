<lib-drawer-container>
  <main>

    <div
      fxLayout="row"
      fxLayoutAlign="space-between center">

      <paper-button
        (click)="testSelector.drawer.open()">
        Select Columns
      </paper-button>

      <lib-test-filter
        #testFilter>
      </lib-test-filter>

    </div>

    <lib-test-table
      [columns]="testSelector.columns | async"
      [page]="testCtrl.page | async"
      #testTable>
    </lib-test-table>

    <lib-test-ctrl
      (loading)="testFilter.loading = testTable.loading = $event"
      (saving)="testSaver.saving = $event"
      [filter]="testFilter.form.stream | async"
      [state]="testTable.table.state | async"
      [update]="testSaver.form.stream | async"
      #testCtrl>
    </lib-test-ctrl>

    <lib-test-saver
      [item]="testTable.table.selected | async"
      #testSaver>
    </lib-test-saver>

    <lib-test-selector
      #testSelector>
    </lib-test-selector>

    <lib-exportable-data
      [datasource]="testData"
      [fields]="testSelector.allFields"
      [filter]="testFilter.form.stream | async"
      [headers]="testSelector.allHeaders"
      [page]="testCtrl.page | async"
      [state]="testTable.table.state | async"
      filename="testdata">
    </lib-exportable-data>

  </main>
</lib-drawer-container>
